<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
</head>
<body>
	<form id = "toOrderPageId" action = "product.html"><!--  -->
		<input type='hidden' name='chain_name' value='hidden' />
		<input type='hidden' name='store_name' value='hidden' />
	</form>
<script>
	var tmp;
	function getProduct(chain_name, store_name){//체인의 상점의 물품을 가져오기 위해서 form 태그로 서버에 보낸다. 
    	document.querySelector("#toOrderPageId > input[type=hidden]:nth-child(1)").value = chain_name;//chain_name
    	document.querySelector("#toOrderPageId > input[type=hidden]:nth-child(2)").value = store_name;//store_name
    	document.getElementById("toOrderPageId").submit();
	}
	</script>
	<div class="input-group" style = "width:50%">
		<input id = "searchStoreId" type="text" value="" class="form-control" placeholder="매장검색">
		<span class="input-group-btn"><button id="searchId" type="button" class="btn btn-primary">Go</button></span>
	</div>
		<div .table-responsive style = "width:50%">
	  		<table border="1" class = "table table-bordered table-hover" >
				<th>매장명</th>
	    	</table>
		</div>
	<script>
	$("#searchId").on("click", function(){
		data = "chain=" + $('#searchStoreId').val();
		$.ajax({
            url: "searchStore",
            type: "POST",
            data: data,
            dataType: "json",
            success: function(data){
            	$('th').empty();
                for(var i=0; i<data.length; i++){
                	//<button type="button" onclick="alert('Hello world!')">Click Me!</button>
                	$('th').append("<tr><td> <button class=\"block\" style=\"width:100%\" type=\"button\" onclick=\"getProduct(" +  "'"  + data[i].chain_name + "','"+ data[i].store_name + "'"   +")\">"+ data[i].store_name + "</button> </td></tr>");
                }
                console.log(data[0]);
            },
            error: function(data){
				console.log("에러는" + data);
            }
        });
	});
	</script>
</body>
</html>